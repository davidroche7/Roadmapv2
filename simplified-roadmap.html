<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture Team Roadmap</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.4.3/mermaid.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .container { max-width: 1200px; margin: 0 auto; }
        pre { background-color: #f5f5f5; padding: 15px; border-radius: 5px; overflow: auto; }
        button { padding: 10px 15px; background-color: #4CAF50; color: white; border: none; 
                cursor: pointer; margin: 10px 5px; border-radius: 4px; }
        #output { margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Architecture Team Roadmap</h1>
        
        <div>
            <h2>Enter your project data:</h2>
            <pre id="example">
[
  {
    "project_name": "Work object 1",
    "architect": "Stanley",
    "type": "Product roadmap",
    "status": "In Progress",
    "start_date": "2025-02-21",
    "end_date": "2025-09-23"
  },
  {
    "project_name": "Feature X Redesign",
    "architect": "Alan",
    "type": "Feature",
    "status": "Complete",
    "start_date": "2025-01-01",
    "end_date": "2025-03-01"
  }
]
</pre>
            <p>Copy the example above and modify it with your data:</p>
            <textarea id="jsonInput" rows="15" cols="80"></textarea><br>
            <button onclick="generateRoadmap()">Generate Roadmap</button>
        </div>
        
        <div id="output"></div>
    </div>

    <script>
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Copy example to textarea
            document.getElementById('jsonInput').value = document.getElementById('example').textContent.trim();
            
            // Initialize Mermaid
            mermaid.initialize({ startOnLoad: true });
        });
        
        function generateRoadmap() {
            try {
                // Get the input JSON
                const jsonInput = document.getElementById('jsonInput').value;
                const projects = JSON.parse(jsonInput);
                
                // Create the Mermaid Gantt chart
                let ganttChart = 'gantt\n';
                ganttChart += '    title Architecture Roadmap Timeline\n';
                ganttChart += '    dateFormat YYYY-MM-DD\n';
                ganttChart += '    axisFormat %b %Y\n\n';
                
                // Group projects by architect
                const architectProjects = {};
                
                projects.forEach(project => {
                    const architect = project.architect || 'Unassigned';
                    
                    if (!architectProjects[architect]) {
                        architectProjects[architect] = [];
                    }
                    
                    architectProjects[architect].push(project);
                });
                
                // Add projects to gantt chart grouped by architect
                for (const architect in architectProjects) {
                    ganttChart += `    section ${architect}\n`;
                    
                    architectProjects[architect].forEach(project => {
                        // Map status to Mermaid status
                        let status = 'active';
                        if (project.status && project.status.toLowerCase().includes('complete')) {
                            status = 'done';
                        } else if (project.status && project.status.toLowerCase().includes('plan')) {
                            status = 'planned';
                        }
                        
                        ganttChart += `    ${project.project_name} :${status}, ${project.start_date}, ${project.end_date}\n`;
                    });
                }
                
                // Create the HTML output
                let outputHtml = '<h2>Architecture Roadmap</h2>';
                outputHtml += '<div class="mermaid">\n' + ganttChart + '</div>';
                
                // Add project table
                outputHtml += '<h2>Project Details</h2>';
                outputHtml += '<table border="1" style="border-collapse: collapse; width: 100%;">';
                outputHtml += '<tr><th>Project</th><th>Architect</th><th>Type</th><th>Status</th><th>Start Date</th><th>End Date</th></tr>';
                
                projects.forEach(project => {
                    outputHtml += `<tr>
                        <td>${project.project_name}</td>
                        <td>${project.architect || 'Unassigned'}</td>
                        <td>${project.type || 'N/A'}</td>
                        <td>${project.status || 'N/A'}</td>
                        <td>${project.start_date}</td>
                        <td>${project.end_date}</td>
                    </tr>`;
                });
                
                outputHtml += '</table>';
                
                // Update the output
                document.getElementById('output').innerHTML = outputHtml;
                
                // Re-render Mermaid diagrams
                mermaid.init(undefined, document.querySelectorAll('.mermaid'));
                
            } catch (error) {
                document.getElementById('output').innerHTML = `<div style="color: red;">Error: ${error.message}</div>`;
                console.error('Error:', error);
            }
        }
    </script>
</body>
</html>
